package WaitsSynchronizations;

import java.util.concurrent.TimeUnit;

import org.openqa.selenium.By;
import org.openqa.selenium.Keys;
import org.openqa.selenium.NoSuchElementException;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.support.ui.FluentWait;
import org.openqa.selenium.support.ui.Wait;

import com.google.common.base.Function;

import DriverInitialise.InitChrome;
import common.NumConstants;

public class FluentWaitClass {

	public static void main(String[] args) {
		WebDriver aDriver = new InitChrome().init();
		
		aDriver.get("https://www.google.com/");
		
		WebElement input = aDriver.findElement(By.xpath("//*[@title='Search']"));
		
		input.sendKeys("Selenium");
		input.sendKeys(Keys.RETURN);
		
			// Waiting 10 seconds for an element to be present on the page, checking
		   // for its presence once every 2 seconds.
		   Wait<WebDriver> wait = new FluentWait<WebDriver>(aDriver)
		       .withTimeout(NumConstants.ONE, TimeUnit.SECONDS)
		       .pollingEvery(2, TimeUnit.SECONDS)
		       .ignoring(NoSuchElementException.class);

		   WebElement element = wait.until(new Function<WebDriver, WebElement>() 
		   {
		     public WebElement apply(WebDriver aDriver) {
		       return aDriver.findElement(By.xpath("//a[@class='hide-focus-ring']"));
		     }
		   });
		   
		   element.click();
		
		
	}

}
